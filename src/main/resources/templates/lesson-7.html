<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout}">

<head>
    <title>Pelajaran 7: HTMX + Alpine Combination</title>
</head>

<body>
    <div layout:fragment="content">
        <!-- Lesson Header -->
        <div class="mb-8">
            <div class="flex items-center gap-3 mb-3">
                <span
                    class="flex items-center justify-center w-12 h-12 rounded-xl bg-violet-100 text-violet-600 text-2xl shadow-sm">
                    7Ô∏è‚É£
                </span>
                <h2 class="text-3xl font-extrabold text-gray-900 tracking-tight">Kombinasi HTMX + Alpine.js</h2>
            </div>
            <p class="text-xl text-gray-600 max-w-3xl leading-relaxed">
                Menggabungkan kekuatan <strong>HTMX</strong> (sinkronisasi server) dengan <strong>Alpine.js</strong>
                (interaksi UI client-side) untuk menciptakan pengalaman pengguna yang optimal.
            </p>
        </div>

        <!-- Strategy Section -->
        <div class="card bg-violet-50 border-violet-100 mb-8">
            <h3 class="text-lg font-bold text-violet-900 mb-4 flex items-center gap-2">
                <span>ü§ù</span> Philosophies
            </h3>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- HTMX Role -->
                <div class="bg-white p-5 rounded-xl border border-violet-100 shadow-sm relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 w-16 h-16 bg-blue-50 rounded-full blur-xl"></div>
                    <div class="relative">
                        <span
                            class="inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded mb-2">HTMX
                            Role</span>
                        <h4 class="font-bold text-gray-900 mb-2">Server Sync & Persistence</h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li class="flex items-start gap-2">üîπ Mengirim data form ke server</li>
                            <li class="flex items-start gap-2">üîπ Fetching data/HTML parsial</li>
                            <li class="flex items-start gap-2">üîπ Server-side validation (ultimate truth)</li>
                        </ul>
                    </div>
                </div>

                <!-- Alpine Role -->
                <div class="bg-white p-5 rounded-xl border border-violet-100 shadow-sm relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 w-16 h-16 bg-fuchsia-50 rounded-full blur-xl"></div>
                    <div class="relative">
                        <span
                            class="inline-block px-2 py-1 bg-fuchsia-100 text-fuchsia-700 text-xs font-bold rounded mb-2">Alpine.js
                            Role</span>
                        <h4 class="font-bold text-gray-900 mb-2">UI State & Interactivity</h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li class="flex items-start gap-2">üî∏ Toggle Modals, Tabs, Dropdowns</li>
                            <li class="flex items-start gap-2">üî∏ Instant Client-side Validation</li>
                            <li class="flex items-start gap-2">üî∏ Animations & Transitions</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div
                class="mt-6 flex items-center gap-3 p-3 bg-violet-100/50 rounded-lg text-sm text-violet-800 border border-violet-200">
                <svg class="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <p><strong>Rule of Thumb:</strong> Gunakan Alpine untuk interaksi yang <em>tidak perlu</em> disimpan ke
                    database. Gunakan HTMX saat data <em>harus</em> persisten atau butuh logika bisnis server.</p>
            </div>
        </div>

        <!-- Demo 1: Confirm Dialog -->
        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>üéÆ</span> Playground
        </h3>

        <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <div class="card p-0 overflow-hidden border border-gray-200">
                <div class="bg-gray-50 border-b border-gray-200 px-4 py-3 flex justify-between items-center">
                    <span class="font-semibold text-gray-700 text-sm">#1 Delete Confirmation</span>
                    <span
                        class="text-xs bg-white border border-gray-200 px-2 py-1 rounded text-gray-500 font-mono">Alpine
                        Modal + HTMX Delete</span>
                </div>
                <div class="p-8 flex flex-col items-center justify-center bg-white h-full space-y-4">
                    <p class="text-sm text-gray-600 text-center mb-2">Simulasi interaksi hapus data aman.</p>

                    <div x-data="{ showConfirm: false }">
                        <!-- Trigger Button -->
                        <button @click="showConfirm = true"
                            class="btn bg-red-50 text-red-600 hover:bg-red-100 border-red-200 flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                                </path>
                            </svg>
                            Hapus Item #42
                        </button>

                        <!-- Modal Overlay (Client Side) -->
                        <div x-show="showConfirm" style="display: none;"
                            class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"
                            x-transition.opacity>

                            <!-- Modal Content -->
                            <div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 text-center"
                                @click.outside="showConfirm = false"
                                x-transition:enter="transition ease-out duration-300"
                                x-transition:enter-start="opacity-0 scale-90"
                                x-transition:enter-end="opacity-100 scale-100">

                                <div
                                    class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                                        </path>
                                    </svg>
                                </div>
                                <h3 class="text-lg font-bold text-gray-900 mb-2">Yakin hapus?</h3>
                                <p class="text-sm text-gray-500 mb-6">Tindakan ini tidak bisa dibatalkan. Data akan
                                    hilang selamanya.</p>

                                <div class="flex gap-3 justify-center">
                                    <button @click="showConfirm = false"
                                        class="btn bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">
                                        Batal
                                    </button>
                                    <!-- Fake HTMX Action for Demo -->
                                    <button @click="showConfirm = false; alert('HTMX DELETE triggered!')"
                                        class="btn bg-red-600 text-white hover:bg-red-700 shadow-lg shadow-red-500/30">
                                        Ya, Hapus
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Demo 2: Multi-Step Form -->
            <div class="card p-0 overflow-hidden border border-gray-200">
                <div class="bg-gray-50 border-b border-gray-200 px-4 py-3 flex justify-between items-center">
                    <span class="font-semibold text-gray-700 text-sm">#2 Multi-step Wizard</span>
                    <span
                        class="text-xs bg-white border border-gray-200 px-2 py-1 rounded text-gray-500 font-mono">Alpine
                        Tabs + HTMX Submit</span>
                </div>
                <div class="p-8 bg-white h-full" x-data="{ step: 1 }">
                    <!-- Progress Bar -->
                    <div class="flex gap-2 mb-6">
                        <div class="h-2 flex-1 rounded-full transition-colors duration-300"
                            :class="step >= 1 ? 'bg-violet-500' : 'bg-gray-200'"></div>
                        <div class="h-2 flex-1 rounded-full transition-colors duration-300"
                            :class="step >= 2 ? 'bg-violet-500' : 'bg-gray-200'"></div>
                        <div class="h-2 flex-1 rounded-full transition-colors duration-300"
                            :class="step >= 3 ? 'bg-violet-500' : 'bg-gray-200'"></div>
                    </div>

                    <!-- Step 1 -->
                    <div x-show="step === 1" x-transition:enter="transition fade-in slide-in-from-right-4 duration-300">
                        <h4 class="font-bold text-lg mb-4">Step 1: Info Akun</h4>
                        <div class="space-y-3">
                            <input class="input w-full" placeholder="Username">
                            <input class="input w-full" type="email" placeholder="Email Address">
                        </div>
                        <div class="mt-6 flex justify-end">
                            <button @click="step++" class="btn bg-violet-600 text-white hover:bg-violet-700">Lanjut
                                &rarr;</button>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div x-show="step === 2" style="display: none;"
                        x-transition:enter="transition fade-in slide-in-from-right-4 duration-300">
                        <h4 class="font-bold text-lg mb-4">Step 2: Preferensi</h4>
                        <div class="space-y-3">
                            <label
                                class="flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                <input type="checkbox" class="text-violet-600 rounded"> <span>Newsletter Mingguan</span>
                            </label>
                            <label
                                class="flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                <input type="checkbox" class="text-violet-600 rounded"> <span>Notifikasi Promo</span>
                            </label>
                        </div>
                        <div class="mt-6 flex justify-between">
                            <button @click="step--" class="btn text-gray-500 hover:bg-gray-100">&larr; Kembali</button>
                            <button @click="step++" class="btn bg-violet-600 text-white hover:bg-violet-700">Lanjut
                                &rarr;</button>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div x-show="step === 3" style="display: none;"
                        x-transition:enter="transition fade-in slide-in-from-right-4 duration-300">
                        <h4 class="font-bold text-lg mb-4">Step 3: Review</h4>
                        <div class="bg-violet-50 p-4 rounded-lg mb-4 text-sm text-violet-800">
                            Pastikan data Anda sudah benar sebelum submit ke server.
                        </div>
                        <div class="mt-6 flex justify-between">
                            <button @click="step--" class="btn text-gray-500 hover:bg-gray-100">&larr; Kembali</button>
                            <!-- Fake HTMX Submit -->
                            <button @click="alert('HTMX POST triggered!')"
                                class="btn bg-green-600 text-white hover:bg-green-700 shadow-green-500/30">‚úÖ
                                Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Code Explanation -->
        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>üìù</span> Bedah Kode
        </h3>

        <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <div class="card bg-gray-900 text-gray-300 border-gray-800">
                <div class="flex items-center justify-between mb-4 border-b border-gray-800 pb-2">
                    <h3 class="font-semibold text-white flex items-center gap-2">
                        <span>Modal Logic</span>
                    </h3>
                </div>
                <div class="font-mono text-sm leading-relaxed overflow-x-auto">
                    <pre><code class="language-html">&lt;div <span class="text-fuchsia-400">x-data</span>="{ show: false }"&gt;
    &lt;button <span class="text-fuchsia-400">@click</span>="show = true"&gt;Del&lt;/button&gt;
    
    &lt;div <span class="text-fuchsia-400">x-show</span>="show"&gt;
        &lt;h3&gt;Confirm?&lt;/h3&gt;
        
        &lt;!-- HTMX Action --&gt;
        &lt;button <span class="text-blue-400">hx-delete</span>="/item/1"
                <span class="text-blue-400">hx-target</span>="#item-1"
                <span class="text-fuchsia-400">@click</span>="show = false"&gt;
            Yes, Delete
        &lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
                </div>
            </div>

            <div class="card bg-gray-900 text-gray-300 border-gray-800">
                <div class="flex items-center justify-between mb-4 border-b border-gray-800 pb-2">
                    <h3 class="font-semibold text-white flex items-center gap-2">
                        <span>Tabs/Wizard Logic</span>
                    </h3>
                </div>
                <div class="font-mono text-sm leading-relaxed overflow-x-auto">
                    <pre><code class="language-html">&lt;div <span class="text-fuchsia-400">x-data</span>="{ step: 1 }"&gt;
    &lt;div <span class="text-fuchsia-400">x-show</span>="step === 1"&gt;
        &lt;!-- Step 1 Inputs --&gt;
        &lt;button <span class="text-fuchsia-400">@click</span>="step++"&gt;Next&lt;/button&gt;
    &lt;/div&gt;

    &lt;div <span class="text-fuchsia-400">x-show</span>="step === 2"&gt;
        &lt;!-- Final Submit --&gt;
        &lt;button <span class="text-blue-400">hx-post</span>="/submit"&gt;
            Submit
        &lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
                </div>
            </div>
        </div>

        <!-- Key Takeaways -->
        <div class="card bg-gradient-to-br from-green-50 to-emerald-50 border-l-4 border-green-500 mb-8">
            <h3 class="text-lg font-bold text-green-900 mb-3 flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Poin Penting
            </h3>
            <ul class="grid sm:grid-cols-2 gap-3 text-sm text-green-800">
                <li class="flex items-start gap-2">
                    <span class="text-green-500 mt-1">‚óè</span>
                    <span><strong>UX Enhancement:</strong> Alpine membuat UI terasa instant (tanpa loading) untuk
                        interaksi lokal.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-500 mt-1">‚óè</span>
                    <span><strong>Clean Separation:</strong> Logic view dimanage Alpine, Logic data/bisnis dimanage
                        Server/HTMX.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-500 mt-1">‚óè</span>
                    <span><strong>Event Coordination:</strong> Gunakan event listeners untuk sinkronisasi state antara
                        Alpine dan HTMX (contoh: close modal after submit).</span>
                </li>
            </ul>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between items-center border-t border-gray-200 pt-6">
            <a href="/lesson/6" class="btn btn-ghost flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Pelajaran 6
            </a>
            <a href="/lesson/8" class="btn btn-primary flex items-center gap-2 shadow-lg shadow-primary-500/20">
                Lanjut ke Pelajaran 8
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3">
                    </path>
                </svg>
            </a>
        </div>
    </div>
</body>

</html>