<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout}">

<head>
    <title>Pelajaran 11: Best Practices & Review</title>
</head>

<body>
    <div layout:fragment="content">
        <!-- Lesson Header -->
        <div
            class="mb-8 relative overflow-hidden bg-gradient-to-r from-gray-900 to-indigo-900 rounded-3xl p-8 sm:p-12 text-white shadow-2xl">
            <!-- Decorative Background -->
            <div class="absolute top-0 right-0 -mr-8 -mt-8 w-64 h-64 bg-white opacity-5 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 left-0 -ml-8 -mb-8 w-48 h-48 bg-purple-500 opacity-20 rounded-full blur-3xl">
            </div>

            <div class="relative z-10">
                <div class="flex items-center gap-4 mb-4">
                    <span
                        class="flex items-center justify-center w-14 h-14 rounded-2xl bg-white/10 text-3xl backdrop-blur-sm border border-white/20">
                        ğŸ“
                    </span>
                    <div
                        class="px-3 py-1 bg-amber-400 text-amber-900 text-xs font-bold uppercase tracking-wider rounded-full">
                        Final Lesson
                    </div>
                </div>
                <h2 class="text-4xl sm:text-5xl font-extrabold tracking-tight mb-4">
                    Best Practices & Mastery
                </h2>
                <p class="text-indigo-100 text-lg sm:text-xl max-w-2xl leading-relaxed">
                    Menyempurnakan aplikasi dengan keamanan, performa, dan arsitektur yang solid siap produksi.
                </p>
            </div>
        </div>

        <!-- Completion Banner -->
        <div
            class="card border-l-4 border-green-500 bg-green-50/50 mb-8 flex flex-col sm:flex-row items-center gap-6 p-6">
            <div
                class="w-16 h-16 shrink-0 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-3xl">
                ğŸ‰
            </div>
            <div class="text-center sm:text-left">
                <h3 class="text-xl font-bold text-gray-900">Selamat! Anda sudah menyelesaikan kurikulum.</h3>
                <p class="text-gray-600 mt-1">
                    Anda telah mempelajari core concepts HTMX, integrasi Alpine.js, dan advanced patterns. Sekarang
                    saatnya memoles skill dengan best practices.
                </p>
            </div>
        </div>

        <!-- Three Pillars Grid -->
        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>ğŸ›¡ï¸</span> The Three Pillars of Production
        </h3>
        <div class="grid lg:grid-cols-3 gap-6 mb-8">
            <!-- Security -->
            <div class="card border-t-4 border-red-500 hover:shadow-lg transition-all text-center">
                <div
                    class="w-12 h-12 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-3 text-xl">
                    ğŸ”
                </div>
                <h4 class="font-bold text-gray-900 mb-2">Security</h4>
                <p class="text-sm text-gray-600 mb-4">
                    Protect users and data with CSRF & Validation.
                </p>
                <ul class="text-left text-xs space-y-2 text-gray-500 bg-gray-50 p-3 rounded-lg">
                    <li class="flex items-start gap-2">âœ“ CSRF Tokens on POST</li>
                    <li class="flex items-start gap-2">âœ“ Server-side Input Validation</li>
                    <li class="flex items-start gap-2">âœ“ Escape Output (XSS)</li>
                </ul>
            </div>

            <!-- Performance -->
            <div class="card border-t-4 border-amber-500 hover:shadow-lg transition-all text-center">
                <div
                    class="w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mx-auto mb-3 text-xl">
                    âš¡
                </div>
                <h4 class="font-bold text-gray-900 mb-2">Performance</h4>
                <p class="text-sm text-gray-600 mb-4">
                    Optimize speed and reduce server load.
                </p>
                <ul class="text-left text-xs space-y-2 text-gray-500 bg-gray-50 p-3 rounded-lg">
                    <li class="flex items-start gap-2">âœ“ Debounce Inputs</li>
                    <li class="flex items-start gap-2">âœ“ Lazy Load (Infinite Scroll)</li>
                    <li class="flex items-start gap-2">âœ“ Caching Policy</li>
                </ul>
            </div>

            <!-- Architecture -->
            <div class="card border-t-4 border-blue-500 hover:shadow-lg transition-all text-center">
                <div
                    class="w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mx-auto mb-3 text-xl">
                    ğŸ—ï¸
                </div>
                <h4 class="font-bold text-gray-900 mb-2">Architecture</h4>
                <p class="text-sm text-gray-600 mb-4">
                    Maintainable and scalable codebase.
                </p>
                <ul class="text-left text-xs space-y-2 text-gray-500 bg-gray-50 p-3 rounded-lg">
                    <li class="flex items-start gap-2">âœ“ Fragment-based Templates</li>
                    <li class="flex items-start gap-2">âœ“ Thin Controllers</li>
                    <li class="flex items-start gap-2">âœ“ Progressive Enhancement</li>
                </ul>
            </div>
        </div>

        <!-- Deep Dive Code -->
        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>ğŸ“</span> Code Patterns Deep Dive
        </h3>

        <div class="space-y-6 mb-8">
            <!-- CSRF Pattern -->
            <div class="card bg-gray-900 text-gray-300 border-gray-800">
                <div class="flex items-center justify-between mb-4 border-b border-gray-800 pb-2">
                    <h3 class="font-semibold text-white flex items-center gap-2">
                        <span>Pattern: Secure CSRF Form</span>
                    </h3>
                    <span
                        class="text-xs font-mono bg-red-900/50 text-red-200 px-2 py-1 rounded border border-red-800">Security</span>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="font-mono text-sm leading-relaxed overflow-x-auto">
                        <pre><code class="language-html">&lt;!-- Option 1: Inline (Easiest) --&gt;
&lt;form <span class="text-blue-400">hx-post</span>="/save"
      <span class="text-fuchsia-400">hx-headers</span>='{"X-CSRF-TOKEN": "[[${_csrf.token}]]"}'&gt;
    ...
&lt;/form&gt;

&lt;!-- Option 2: Thymeleaf Syntax --&gt;
&lt;form <span class="text-blue-400">hx-post</span>="/save"
      <span class="text-fuchsia-400">th:hx-headers</span>='|{"X-CSRF-TOKEN": "${_csrf.token}"}|'&gt;
    ...
&lt;/form&gt;</code></pre>
                    </div>
                    <div class="text-sm text-gray-400">
                        <p class="mb-2"><strong class="text-white">Why?</strong> Spring Security mewajibkan token CSRF
                            untuk method POST/PUT/DELETE. Tanpa ini, HTMX request akan ditolak (403 Forbidden).</p>
                        <p class="text-xs italic">Tips: Gunakan Option 1 karena lebih mudah dibaca dan tidak
                            membingungkan syntax JSON.</p>
                    </div>
                </div>
            </div>

            <!-- Debounce Pattern -->
            <div class="card bg-gray-900 text-gray-300 border-gray-800">
                <div class="flex items-center justify-between mb-4 border-b border-gray-800 pb-2">
                    <h3 class="font-semibold text-white flex items-center gap-2">
                        <span>Pattern: Search Optimization</span>
                    </h3>
                    <span
                        class="text-xs font-mono bg-amber-900/50 text-amber-200 px-2 py-1 rounded border border-amber-800">Performance</span>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="font-mono text-sm leading-relaxed overflow-x-auto">
                        <pre><code class="language-html">&lt;input type="search" 
       name="q"
       <span class="text-blue-400">hx-get</span>="/search" 
       <span class="text-fuchsia-400">hx-trigger</span>="keyup changed delay:500ms" 
       <span class="text-green-400">hx-target</span>="#results"&gt;</code></pre>
                    </div>
                    <div class="text-sm text-gray-400">
                        <ul class="space-y-1">
                            <li><code>keyup</code>: Trigger setiap ketikan.</li>
                            <li><code>changed</code>: Hanya jika nilai berubah (mengabaikan arrow keys dll).</li>
                            <li><code>delay:500ms</code>: <strong>Crucial!</strong> Tunggu user berhenti mengetik 500ms
                                request dikirim. Hemat resource server.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Next Steps -->
        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>ğŸš€</span> Your Journey Continues...
        </h3>

        <div class="grid md:grid-cols-2 gap-6 mb-8">
            <a href="https://htmx.org/docs" target="_blank"
                class="card hover:border-gray-400 transition-all group cursor-pointer block">
                <h4 class="font-bold text-gray-900 mb-1 group-hover:text-indigo-600 transition-colors">HTMX
                    Documentation &rarr;</h4>
                <p class="text-sm text-gray-500">Official docs adalah referensi terbaik untuk update terbaru.</p>
            </a>
            <a href="https://alpinejs.dev/start" target="_blank"
                class="card hover:border-gray-400 transition-all group cursor-pointer block">
                <h4 class="font-bold text-gray-900 mb-1 group-hover:text-indigo-600 transition-colors">Alpine.js
                    Documentation &rarr;</h4>
                <p class="text-sm text-gray-500">Pelajari modifiers dan plugins advanced lainnya.</p>
            </a>
            <a href="https://hypermedia.systems" target="_blank"
                class="card hover:border-gray-400 transition-all group cursor-pointer block">
                <h4 class="font-bold text-gray-900 mb-1 group-hover:text-indigo-600 transition-colors">Hypermedia
                    Systems Book &rarr;</h4>
                <p class="text-sm text-gray-500">Baca buku gratis dari creator HTMX tentang filosofi REST sebenarnya.
                </p>
            </a>
            <a href="/"
                class="card bg-indigo-50 border-indigo-200 hover:border-indigo-300 transition-all group cursor-pointer block">
                <h4 class="font-bold text-indigo-900 mb-1 group-hover:text-indigo-700 transition-colors">Back to
                    Dashboard &rarr;</h4>
                <p class="text-sm text-indigo-700/70">Mulai implementasi di project Anda sendiri.</p>
            </a>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between items-center border-t border-gray-200 pt-6">
            <a href="/lesson/10" class="btn btn-ghost flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Pelajaran 10
            </a>
            <a href="/"
                class="btn bg-gray-900 text-white hover:bg-black shadow-lg shadow-gray-900/20 flex items-center gap-2 px-8">
                <span class="text-lg">ğŸ </span> Dashboard Utama
            </a>
        </div>
    </div>
</body>

</html>