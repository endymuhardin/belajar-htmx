<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout}">

<head>
    <title>Pelajaran 5: Global Search</title>
</head>

<body>
    <div layout:fragment="content">
        <!-- Lesson Header -->
        <div class="mb-8">
            <div class="flex items-center gap-3 mb-3">
                <span
                    class="flex items-center justify-center w-12 h-12 rounded-xl bg-cyan-100 text-cyan-600 text-2xl shadow-sm">
                    5Ô∏è‚É£
                </span>
                <h2 class="text-3xl font-extrabold text-gray-900 tracking-tight">Global Search dengan Debouncing</h2>
            </div>
            <p class="text-xl text-gray-600 max-w-3xl leading-relaxed">
                Implementasi pencarian real-time yang efisien menggunakan <code
                    class="bg-primary-50 text-primary-700 px-1.5 py-0.5 rounded text-sm font-mono border border-primary-100">hx-trigger="keyup changed delay:500ms"</code>
                untuk mengurangi beban server.
            </p>
        </div>

        <!-- Lesson Overview -->
        <div class="card mb-8 border-l-4 border-l-cyan-500">
            <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                <span>üìö</span> Konsep Utama
            </h3>

            <div class="space-y-6">
                <p class="text-gray-600 leading-relaxed">
                    Fitur "Live Search" sangat powerful untuk UX, tapi bisa membebani server jika setiap ketukan tombol
                    mengirim request. HTMX memiliki solusi built-in: <strong>Debouncing</strong>.
                </p>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 rounded-xl p-5 border border-gray-100">
                        <p class="font-semibold text-gray-900 mb-3 flex items-center gap-2">
                            <svg class="w-4 h-4 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Anatomi Trigger
                        </p>
                        <div
                            class="bg-white p-3 rounded border border-gray-200 font-mono text-sm text-center text-cyan-700 mb-3">
                            keyup changed delay:500ms
                        </div>
                        <ul class="space-y-3">
                            <li class="flex items-start gap-2 text-sm text-gray-600">
                                <span class="font-semibold text-cyan-700">keyup:</span>
                                <span>Trigger event saat tombol keyboard dilepas.</span>
                            </li>
                            <li class="flex items-start gap-2 text-sm text-gray-600">
                                <span class="font-semibold text-cyan-700">changed:</span>
                                <span>Hanya kirim request jika nilai input <strong>berubah</strong> (misal: user tekan
                                    panah kanan tidak kirim request).</span>
                            </li>
                            <li class="flex items-start gap-2 text-sm text-gray-600">
                                <span class="font-semibold text-cyan-700">delay:500ms:</span>
                                <span>Tunggu 500ms setelah user berhenti mengetik. Reset jika mengetik lagi.</span>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-gray-50 rounded-xl p-5 border border-gray-100">
                        <p class="font-semibold text-gray-900 mb-3 flex items-center gap-2">
                            <svg class="w-4 h-4 text-cyan-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            Fitur Global Search
                        </p>
                        <ul class="space-y-3 text-sm text-gray-600">
                            <li class="flex items-center gap-2">
                                <span
                                    class="bg-cyan-100 text-cyan-600 rounded-full w-5 h-5 flex items-center justify-center text-xs">‚úì</span>
                                Live search (tanpa tekan enter)
                            </li>
                            <li class="flex items-center gap-2">
                                <span
                                    class="bg-cyan-100 text-cyan-600 rounded-full w-5 h-5 flex items-center justify-center text-xs">‚úì</span>
                                Debouncing (hemat resource)
                            </li>
                            <li class="flex items-center gap-2">
                                <span
                                    class="bg-cyan-100 text-cyan-600 rounded-full w-5 h-5 flex items-center justify-center text-xs">‚úì</span>
                                Highlight matching text
                            </li>
                            <li class="flex items-center gap-2">
                                <span
                                    class="bg-cyan-100 text-cyan-600 rounded-full w-5 h-5 flex items-center justify-center text-xs">‚úì</span>
                                Loading indicator spinner
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Demo -->
        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>üéÆ</span> Demo Interaktif
        </h3>

        <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <div class="card bg-amber-50 border-amber-100">
                <p class="font-bold text-amber-900 mb-2 flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Cara Mencoba:
                </p>
                <ul class="space-y-2 text-sm text-amber-800 list-disc list-outside ml-4">
                    <li>Lihat ke bagian <strong>Navbar</strong> di paling atas halaman ini.</li>
                    <li>Ketik kata kunci, misalnya "HTMX" atau judul Todo yang kamu buat.</li>
                    <li>Perhatikan indikator loading di kanan search bar.</li>
                    <li>Lihat hasil pencarian muncul secara <em>popover</em>.</li>
                </ul>
            </div>

            <div
                class="card border-2 border-dashed border-cyan-200 flex flex-col items-center justify-center text-center p-8 bg-cyan-50/50">
                <div class="animate-bounce mb-4 text-cyan-500">
                    <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
                    </svg>
                </div>
                <h4 class="text-lg font-bold text-gray-900">Demo ada di Navbar üëÜ</h4>
                <p class="text-sm text-gray-500 max-w-xs mx-auto">
                    Fitur Global Search diimplementasikan di Layout utama agar bisa diakses dari halaman mana saja.
                </p>
            </div>
        </div>

        <!-- Code Explanation -->
        <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
            <span>üìù</span> Bedah Kode
        </h3>

        <div class="grid lg:grid-cols-2 gap-8 mb-8">
            <!-- HTML Input -->
            <div class="card bg-gray-900 text-gray-300 border-gray-800">
                <div class="flex items-center justify-between mb-4 border-b border-gray-800 pb-2">
                    <h3 class="font-semibold text-white flex items-center gap-2">
                        <span>Frontend (HTML)</span>
                    </h3>
                    <span class="text-xs font-mono bg-gray-800 px-2 py-1 rounded text-gray-400">layout.html</span>
                </div>
                <div class="font-mono text-sm leading-relaxed overflow-x-auto">
                    <pre><code class="language-html">&lt;input type="search" 
       name="q"
       <span class="text-primary-400">hx-get</span>="/search"
       <span class="text-secondary-400">hx-trigger</span>="keyup changed delay:500ms"
       <span class="text-secondary-400">hx-target</span>="#search-results"
       <span class="text-yellow-400">hx-indicator</span>="#search-loading" /&gt;

&lt;!-- Loading Spinner --&gt;
&lt;div id="search-loading" class="<span class="text-yellow-400">htmx-indicator</span>"&gt;
    &lt;svg&gt;...&lt;/svg&gt;
&lt;/div&gt;</code></pre>
                </div>
            </div>

            <!-- CSS Logic -->
            <div class="card bg-gray-900 text-gray-300 border-gray-800">
                <div class="flex items-center justify-between mb-4 border-b border-gray-800 pb-2">
                    <h3 class="font-semibold text-white flex items-center gap-2">
                        <span>CSS (Tailwind)</span>
                    </h3>
                    <span class="text-xs font-mono bg-gray-800 px-2 py-1 rounded text-gray-400">input.css</span>
                </div>
                <div class="font-mono text-sm leading-relaxed overflow-x-auto">
                    <pre><code class="language-css">/* Default hidden */
.htmx-indicator {
    opacity: 0;
    transition: opacity 200ms ease-in;
}

/* Shown when requesting */
.htmx-request .htmx-indicator {
    opacity: 1;
}

/* .htmx-request class ditambahkan otomatis
   oleh HTMX ke elemen yang memicu request */</code></pre>
                </div>
            </div>
        </div>

        <!-- Key Takeaways -->
        <div class="card bg-gradient-to-br from-green-50 to-emerald-50 border-l-4 border-green-500 mb-8">
            <h3 class="text-lg font-bold text-green-900 mb-3 flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Poin Penting
            </h3>
            <ul class="grid sm:grid-cols-2 gap-3 text-sm text-green-800">
                <li class="flex items-start gap-2">
                    <span class="text-green-500 mt-1">‚óè</span>
                    <span><strong>Delay is Key:</strong> Tanpa delay, server akan dibombardir request setiap ketukan
                        jari.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-500 mt-1">‚óè</span>
                    <span><strong>Changed Modifier:</strong> Mencegah request ulang jika user menekan tombol
                        non-character (arrow keys, shift).</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-500 mt-1">‚óè</span>
                    <span><strong>Visual Feedback:</strong> Loading indicator sangat penting untuk memberi tahu user
                        bahwa sistem sedang bekerja.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-500 mt-1">‚óè</span>
                    <span><strong>Server-side Logic:</strong> Logic pencarian dan highlight tetap di Java, client hanya
                        terima HTML jadi.</span>
                </li>
            </ul>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between items-center border-t border-gray-200 pt-6">
            <a href="/lesson/4" class="btn btn-ghost flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Pelajaran 4
            </a>
            <a href="/lesson/6" class="btn btn-primary flex items-center gap-2 shadow-lg shadow-primary-500/20">
                Lanjut ke Pelajaran 6
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3">
                    </path>
                </svg>
            </a>
        </div>
    </div>
</body>

</html>